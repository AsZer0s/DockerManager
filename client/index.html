<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Docker Manager - å®¹å™¨ç®¡ç†ç³»ç»Ÿ</title>
    <meta name="description" content="åŠŸèƒ½å¼ºå¤§çš„ Docker å®¹å™¨ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå¤šæœåŠ¡å™¨ç®¡ç†ã€å®æ—¶ç›‘æ§ã€Web SSH æ§åˆ¶å°" />
    <meta name="keywords" content="Docker,å®¹å™¨ç®¡ç†,æœåŠ¡å™¨ç›‘æ§,SSH,Telegramæœºå™¨äºº" />
    <!-- å…è®¸å¤–éƒ¨è„šæœ¬å’Œå†…è”è„šæœ¬çš„ CSP -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://telegram.org; object-src 'none';">
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- ä¸¥æ ¼çš„ Telegram Web App æ£€æµ‹ - ä»…å¯¹ /telegram-webapp è·¯å¾„ç”Ÿæ•ˆ -->
    <script>
        (function() {
          // åªå¯¹ /telegram-webapp è·¯å¾„è¿›è¡Œæ£€æµ‹
          if (window.location.pathname === '/telegram-webapp') {
            // æ£€æŸ¥æ˜¯å¦åœ¨ Telegram Web App ç¯å¢ƒä¸­
            const isTelegramWebApp = (
              typeof window.Telegram !== 'undefined' &&
              typeof window.Telegram.WebApp !== 'undefined' &&
              window.Telegram.WebApp.initData
            );
            
            // æ£€æŸ¥æ˜¯å¦åœ¨æ¡Œé¢æµè§ˆå™¨ä¸­è®¿é—®
            const isDesktopBrowser = !navigator.userAgent.includes('Telegram') && 
                                   !window.location.search.includes('tgWebAppData') &&
                                   !document.referrer.includes('telegram');
            
            if (!isTelegramWebApp) {
              if (isDesktopBrowser) {
                // æ¡Œé¢æµè§ˆå™¨è®¿é—®ï¼Œæ˜¾ç¤ºå‹å¥½æç¤º
                document.documentElement.innerHTML = `
                  <!DOCTYPE html>
                  <html>
                  <head>
                    <meta charset="UTF-8">
                    <title>Docker Manager - Telegram Web App</title>
                    <style>
                      body { 
                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                        display: flex; 
                        justify-content: center; 
                        align-items: center; 
                        height: 100vh; 
                        margin: 0; 
                        background: #f5f5f5;
                      }
                      .container { 
                        text-align: center; 
                        background: white; 
                        padding: 40px; 
                        border-radius: 12px; 
                        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
                        max-width: 400px;
                      }
                      .icon { font-size: 48px; margin-bottom: 20px; }
                      h1 { color: #333; margin-bottom: 16px; }
                      p { color: #666; line-height: 1.6; margin-bottom: 20px; }
                      .telegram-link { 
                        display: inline-block; 
                        background: #0088cc; 
                        color: white; 
                        padding: 12px 24px; 
                        text-decoration: none; 
                        border-radius: 8px; 
                        font-weight: 500;
                      }
                      .telegram-link:hover { background: #006699; }
                    </style>
                  </head>
                  <body>
                    <div class="container">
                      <div class="icon">ğŸ“±</div>
                      <h1>Telegram Web App</h1>
                      <p>æ­¤åº”ç”¨åªèƒ½åœ¨ Telegram ä¸­æ‰“å¼€</p>
                      <p>è¯·é€šè¿‡ Telegram æœºå™¨äººè®¿é—®æ­¤åº”ç”¨</p>
                      <a href="https://t.me/DockerManger_Bot" class="telegram-link">
                        æ‰“å¼€ Telegram æœºå™¨äºº
                      </a>
                    </div>
                  </body>
                  </html>
                `;
              } else {
                // å¯èƒ½æ˜¯ Telegram ç¯å¢ƒä½†åˆå§‹åŒ–å¤±è´¥
                try {
                  window.stop();
                } catch (e) {
                  document.execCommand('Stop');
                }
                document.documentElement.innerHTML = '';
                document.title = 'Telegram Web App åˆå§‹åŒ–å¤±è´¥';
                throw new Error("Telegram Web App åˆå§‹åŒ–å¤±è´¥");
              }
            }
          }
        })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
